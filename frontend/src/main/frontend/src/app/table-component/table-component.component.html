<p>
  <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample{{tableTypeName}}" aria-expanded="false" aria-controls="collapseExample">
    {{title}}
  </a>
</p>
<div class="collapse" id="collapseExample{{tableTypeName}}">
  <div class="card card-body">
    <div class="row">
      <div [ngClass]="{'col-md-8': relationParameterName !== null, 'col-md-12':relationParameterName === null}" class="">
        <ngx-datatable
        class='material ngx-datatable fixed-header'
        [rows]="rows"
        [columns]="cols"
        [columnMode]="'force'"
        [headerHeight]="80"
        [footerHeight]="100"
        [rowHeight]="'auto'"
        [externalPaging]="true"
        [count]="page.totalElements"
        [offset]="page.pageNumber"
        [limit]="page.size"
        [messages]="page.messages"
        [selectionType]="'row'"
        (select)="onSelectRelationParameter($event)"
        (page)='setPage($event)' >

        <ng-template #searchTmpl let-column="column" let-sort="sortFn" ngx-datatable-header-template>
          <span class="datatable-header-cell-wrapper">
            <span class="datatable-header-cell-label draggable" (click)="sort()">{{column.name}}</span>
          </span>
          <div class="row">
            <input type="text" class="form-control " (input)="find()" [(ngModel)]="dataTableValues[column.name]"  placeholder="Szukaj">
          </div>
        </ng-template>

        <ng-template #indexTmpl let-value="value" width="10" let-rowIndex="rowIndex">
            {{rowIndex + 1}}
        </ng-template>
        <ng-template #editTmpl let-value="value">
            <button type="button" class="btn btn-primary" (click)="edit(value)">Edytuj</button>
        </ng-template>
        <ng-template #addDelTmpl let-value="value">
            <button type="button" class="btn btn-danger" (click)="remove(value)">Usu≈Ñ</button>
        </ng-template>
            <ngx-datatable-footer>
              <ng-template
                let-curPage="curPage"
                let-offset="offset"
                let-pageSize="pageSize"
                let-rowCount="rowCount"
                let-selected="selected"
                ngx-datatable-footer-template>
                <div class="container">
                  <div class="row pull-right margin-bottom-md">
                    <div class="col-md-1 col-lg-1 col-sm-1">
                    </div>
                    <ng-container  *ngFor="let colName of dataTableNames; let i = index">
                      <td *ngIf="colName.type === 'Select'; else elseBlock">
                        <div class="col-md-4  col-lg-4 col-sm-4">
                          <select [(ngModel)]="dataTableValues[i]">
                            <option *ngFor="let item of selectDefinions[colName.value]" [ngValue]="item.id">{{item.name}}</option>
                          </select>
                        </div>
                      </td>
                      <ng-template #elseBlock>
                          <div class="col-md-4 col-lg-4 col-sm-4">
                            <input type="text" class="form-control " [(ngModel)]="dataTableValues[i]"  placeholder="{{colName.value}}">
                          </div>
                      </ng-template>
                    </ng-container>
                      <div class="col-md-1 col-lg-1 col-sm-1">
                        <button type="button" (click)="add()"class="btn btn-success">{{addButtonName}}</button>
                      </div>
                  </div>
                  <div class="row">
                    <datatable-pager class=" pull-right "
                    [pagerLeftArrowIcon]="'datatable-icon-left'"
                    [pagerRightArrowIcon]="'datatable-icon-right'"
                    [pagerPreviousIcon]="'datatable-icon-prev'"
                    [pagerNextIcon]="'datatable-icon-skip'"
                    [page]="curPage"
                    [size]="pageSize"
                    [count]="rowCount"
                    [hidden]="!((rowCount / pageSize) > 1)"
                    (change)="handlePageChange($event)">
                    </datatable-pager>
                  </div>
                </div>
              </ng-template>
            </ngx-datatable-footer>
        </ngx-datatable>
      </div>
      <div *ngIf="relationParameterName !== null;" class="col-md-4">
        <app-table-parameter #courseParameter [hidden]="hiddenParameters" [tableTypeName]="relationParameterName" [isParameter]="true">Loading..</app-table-parameter>
      </div>
    </div>
</div>
